---
- name: get erlang-solutions repo
  apt: deb=https://packages.erlang-solutions.com/erlang-solutions_2.0_all.deb state=present

- name: install erlang
  #using esl-erlang because repos don't keep all erlang package dependecies to go along with older erlang version.
  apt: name=esl-erlang={{ erlang_package_version }} state=present update_cache=yes

  #- name: set erlang_solutions_version from erlang_version
  #  set_fact: erlang_solutions_version="1:{{ erlang_version }}-1"
  #  when: erlang_version is defined
  #
  #- name: set erlang_solutionsfrom erlang_package_version
  #  set_fact: erlang_solutions_version="{{ erlang_package_version }}"
  #  when: erlang_version is undefined
  #
  #- name: debug var
  #  debug:
  #      var: erlang_solutions_version
  #
  #- name: install erlang
  #  command: apt install --allow-downgrades --allow-unauthenticated -y erlang-appmon="{{ erlang_solutions_version }}" erlang-asn1="{{ erlang_solutions_version }}" erlang-base-hipe="{{ erlang_solutions_version }}" erlang-common-test="{{ erlang_solutions_version }}" erlang-corba="{{ erlang_solutions_version }}" erlang-crypto="{{ erlang_solutions_version }}" erlang-debugger="{{ erlang_solutions_version }}" erlang-dev="{{ erlang_solutions_version }}" erlang-dialyzer="{{ erlang_solutions_version }}" erlang-diameter="{{ erlang_solutions_version }}" erlang-edoc="{{ erlang_solutions_version }}" erlang-eldap="{{ erlang_solutions_version }}" erlang-erl-docgen="{{ erlang_solutions_version }}" erlang-et="{{ erlang_solutions_version }}" erlang-eunit="{{ erlang_solutions_version }}" erlang-examples="{{ erlang_solutions_version }}" erlang-gs="{{ erlang_solutions_version }}" erlang-ic="{{ erlang_solutions_version }}" erlang-ic-java="{{ erlang_solutions_version }}" erlang-inets="{{ erlang_solutions_version }}" erlang-inviso="{{ erlang_solutions_version }}" erlang-jinterface=1:19.3-1 erlang-megaco="{{ erlang_solutions_version }}" erlang-mnesia="{{ erlang_solutions_version }}" erlang-mode=1:19.3-1 erlang-observer="{{ erlang_solutions_version }}" erlang-odbc="{{ erlang_solutions_version }}" erlang-os-mon="{{ erlang_solutions_version }}" erlang-parsetools="{{ erlang_solutions_version }}" erlang-percept="{{ erlang_solutions_version }}" erlang-pman="{{ erlang_solutions_version }}" erlang-public-key="{{ erlang_solutions_version }}" erlang-reltool="{{ erlang_solutions_version }}" erlang-runtime-tools="{{ erlang_solutions_version }}" erlang-snmp="{{ erlang_solutions_version }}" erlang-src="{{ erlang_solutions_version }}" erlang-ssh="{{ erlang_solutions_version }}" erlang-ssl="{{ erlang_solutions_version }}" erlang-syntax-tools="{{ erlang_solutions_version }}" erlang-test-server="{{ erlang_solutions_version }}" erlang-toolbar="{{ erlang_solutions_version }}" erlang-tools="{{ erlang_solutions_version }}" erlang-tv="{{ erlang_solutions_version }}" erlang-typer="{{ erlang_solutions_version }}"  erlang-wx="{{ erlang_solutions_version }}" erlang-xmerl="{{ erlang_solutions_version }}" erlang-nox="{{ erlang_solutions_version }}" erlang="{{ erlang_solutions_version }}"
  #  ignore_errors: true
  #  when: erlang_solutions_version == "1:20.3.8.7-1"
  #
  #- name: install erlang
  #  command: apt install --allow-downgrades --allow-unauthenticated -y erlang-appmon="{{ erlang_solutions_version }}" erlang-asn1="{{ erlang_solutions_version }}" erlang-base-hipe="{{ erlang_solutions_version }}" erlang-common-test="{{ erlang_solutions_version }}" erlang-crypto="{{ erlang_solutions_version }}" erlang-debugger="{{ erlang_solutions_version }}" erlang-dev="{{ erlang_solutions_version }}" erlang-dialyzer="{{ erlang_solutions_version }}" erlang-diameter="{{ erlang_solutions_version }}" erlang-edoc="{{ erlang_solutions_version }}" erlang-eldap="{{ erlang_solutions_version }}" erlang-erl-docgen="{{ erlang_solutions_version }}" erlang-et="{{ erlang_solutions_version }}" erlang-eunit="{{ erlang_solutions_version }}" erlang-examples="{{ erlang_solutions_version }}" erlang-gs="{{ erlang_solutions_version }}" erlang-ic="{{ erlang_solutions_version }}" erlang-ic-java="{{ erlang_solutions_version }}" erlang-inets="{{ erlang_solutions_version }}" erlang-inviso="{{ erlang_solutions_version }}" erlang-jinterface=1:19.3-1 erlang-megaco="{{ erlang_solutions_version }}" erlang-mnesia="{{ erlang_solutions_version }}" erlang-mode=1:19.3-1 erlang-observer="{{ erlang_solutions_version }}" erlang-odbc="{{ erlang_solutions_version }}" erlang-os-mon="{{ erlang_solutions_version }}" erlang-parsetools="{{ erlang_solutions_version }}" erlang-percept="{{ erlang_solutions_version }}" erlang-pman="{{ erlang_solutions_version }}" erlang-public-key="{{ erlang_solutions_version }}" erlang-reltool="{{ erlang_solutions_version }}" erlang-runtime-tools="{{ erlang_solutions_version }}" erlang-snmp="{{ erlang_solutions_version }}" erlang-src="{{ erlang_solutions_version }}" erlang-ssh="{{ erlang_solutions_version }}" erlang-ssl="{{ erlang_solutions_version }}" erlang-syntax-tools="{{ erlang_solutions_version }}" erlang-test-server="{{ erlang_solutions_version }}" erlang-toolbar="{{ erlang_solutions_version }}" erlang-tools="{{ erlang_solutions_version }}" erlang-tv="{{ erlang_solutions_version }}" erlang-typer="{{ erlang_solutions_version }}"  erlang-wx="{{ erlang_solutions_version }}" erlang-xmerl="{{ erlang_solutions_version }}" erlang-nox="{{ erlang_solutions_version }}" erlang="{{ erlang_solutions_version }}"
  #  ignore_errors: true
  #  when: erlang_solutions_version == "1:22.2.7-1"
  #
  #- name: install erlang
  #  command: apt-get install --allow-downgrades --allow-unauthenticated -y erlang-appmon="{{ erlang_solutions_version }}" erlang-asn1="{{ erlang_solutions_version }}" erlang-base-hipe="{{ erlang_solutions_version }}" erlang-common-test="{{ erlang_solutions_version }}" erlang-crypto="{{ erlang_solutions_version }}" erlang-debugger="{{ erlang_solutions_version }}" erlang-dev="{{ erlang_solutions_version }}" erlang-dialyzer="{{ erlang_solutions_version }}" erlang-diameter="{{ erlang_solutions_version }}" erlang-edoc="{{ erlang_solutions_version }}" erlang-eldap="{{ erlang_solutions_version }}" erlang-erl-docgen="{{ erlang_solutions_version }}" erlang-et="{{ erlang_solutions_version }}" erlang-eunit="{{ erlang_solutions_version }}" erlang-examples="{{ erlang_solutions_version }}" erlang-gs="{{ erlang_solutions_version }}" erlang-ic="{{ erlang_solutions_version }}" erlang-ic-java="{{ erlang_solutions_version }}" erlang-inets="{{ erlang_solutions_version }}" erlang-inviso="{{ erlang_solutions_version }}" erlang-jinterface=1:19.3-1 erlang-megaco="{{ erlang_solutions_version }}" erlang-mnesia="{{ erlang_solutions_version }}" erlang-mode=1:19.3-1 erlang-observer="{{ erlang_solutions_version }}" erlang-odbc="{{ erlang_solutions_version }}" erlang-os-mon="{{ erlang_solutions_version }}" erlang-parsetools="{{ erlang_solutions_version }}" erlang-percept="{{ erlang_solutions_version }}" erlang-pman="{{ erlang_solutions_version }}" erlang-public-key="{{ erlang_solutions_version }}" erlang-reltool="{{ erlang_solutions_version }}" erlang-runtime-tools="{{ erlang_solutions_version }}" erlang-snmp="{{ erlang_solutions_version }}" erlang-src="{{ erlang_solutions_version }}" erlang-ssh="{{ erlang_solutions_version }}" erlang-ssl="{{ erlang_solutions_version }}" erlang-syntax-tools="{{ erlang_solutions_version }}" erlang-test-server="{{ erlang_solutions_version }}" erlang-toolbar="{{ erlang_solutions_version }}" erlang-tools="{{ erlang_solutions_version }}" erlang-tv="{{ erlang_solutions_version }}" erlang-typer="{{ erlang_solutions_version }}"  erlang-wx="{{ erlang_solutions_version }}" erlang-xmerl="{{ erlang_solutions_version }}" erlang-nox="{{ erlang_solutions_version }}" erlang="{{ erlang_solutions_version }}" erlang-ftp="{{ erlang_solutions_version }}"" erlang-tftp="{{ erlang_solutions_version }}""
  #  ignore_errors: true
  #  when: erlang_solutions_version == "1:22.0.1-1"
  #
  #- name: install erlang
  #  apt:
  #    name: erlang="{{ erlang_package_version }}"
